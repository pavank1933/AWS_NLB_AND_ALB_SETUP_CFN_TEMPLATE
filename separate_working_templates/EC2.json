{ 
   "AWSTemplateFormatVersion":"2010-09-09",
   "Description":"AWS CloudFormation Template",
   "Parameters":{ 
      "InstanceType":{ 
         "Description":"EC2 instance type",
         "Type":"String",
         "Default":"t2.micro",
         "AllowedValues":[ 
            "t1.micro",
            "t2.micro",
            "m1.small",
            "m1.medium",
            "m1.large",
            "m1.xlarge",
            "m2.xlarge",
            "m2.2xlarge",
            "m2.4xlarge",
            "m3.xlarge",
            "m3.2xlarge",
            "c1.medium",
            "c1.xlarge",
            "cc1.4xlarge",
            "cc2.8xlarge",
            "cg1.4xlarge"
         ],
         "ConstraintDescription":"must be a valid EC2 instance type."
      },
      "KeyName":{ 
         "Description":"Name of an existing EC2 KeyPair to enable SSH access to the instance",
         "Type":"String",
         "Default":"us-west-2-pavan-test"
      },
      "SubnetOne":{ 
         "Description":"Subnet One",
         "Type":"String",
         "Default":"subnet-c64b50b1"
      },
      "SubnetTwo":{ 
         "Description":"Subnet Two",
         "Type":"String",
         "Default":"subnet-ea5f988e"
      },
      "SubnetThree":{ 
         "Description":"Subnet Three",
         "Type":"String",
         "Default":"subnet-cfcff896"
      }
   },
   "Mappings":{ 
      "RegionMap":{ 
         "us-east-1":{ 
            "AMI":"ami-00eb20669e0990cb4"
         },
         "us-west-1":{ 
            "AMI":"ami-951945d0"
         },
         "us-west-2":{ 
            "AMI":"ami-08d489468314a58df"
         },
         "eu-west-1":{ 
            "AMI":"ami-24506250"
         },
         "sa-east-1":{ 
            "AMI":"ami-3e3be423"
         },
         "ap-southeast-1":{ 
            "AMI":"ami-74dda626"
         },
         "ap-southeast-2":{ 
            "AMI":"ami-b3990e89"
         },
         "ap-northeast-1":{ 
            "AMI":"ami-dcfa4edd"
         }
      }
   },
   "Resources":{ 
      "SubetOneVmOne":{ 
         "Type":"AWS::EC2::Instance",
         "Properties":{ 
            "ImageId" : { "Fn::FindInMap" : [ "RegionMap", { "Ref" : "AWS::Region" }, "AMI"]},
            "SubnetId":{ 
               "Ref":"SubnetOne"
            },
            "InstanceType":{ 
               "Ref":"InstanceType"
            },
            "KeyName":{ 
               "Ref":"KeyName"
            },
            "Tags":[ 
               { 
                  "Key":"Application",
                  "Value":{ 
                     "Ref":"AWS::StackId"
                  }
               }
            ]
         }
      },
      "SubetOneVmTwo":{ 
         "Type":"AWS::EC2::Instance",
         "Properties":{ 
            "ImageId" : { "Fn::FindInMap" : [ "RegionMap", { "Ref" : "AWS::Region" }, "AMI"]},
            "SubnetId":{ 
               "Ref":"SubnetOne"
            },
            "InstanceType":{ 
               "Ref":"InstanceType"
            },
            "KeyName":{ 
               "Ref":"KeyName"
            },
            "Tags":[ 
               { 
                  "Key":"Application",
                  "Value":{ 
                     "Ref":"AWS::StackId"
                  }
               }
            ]
         }
      },
      "SubetTwoVmOne":{ 
         "Type":"AWS::EC2::Instance",
         "Properties":{ 
            "ImageId" : { "Fn::FindInMap" : [ "RegionMap", { "Ref" : "AWS::Region" }, "AMI"]},
            "SubnetId":{ 
               "Ref":"SubnetTwo"
            },
            "InstanceType":{ 
               "Ref":"InstanceType"
            },
            "KeyName":{ 
               "Ref":"KeyName"
            },
            "Tags":[ 
               { 
                  "Key":"Application",
                  "Value":{ 
                     "Ref":"AWS::StackId"
                  }
               }
            ]
         }
      },
      "SubetTwoVmTwo":{ 
         "Type":"AWS::EC2::Instance",
         "Properties":{ 
            "ImageId" : { "Fn::FindInMap" : [ "RegionMap", { "Ref" : "AWS::Region" }, "AMI"]},
            "SubnetId":{ 
               "Ref":"SubnetTwo"
            },
            "InstanceType":{ 
               "Ref":"InstanceType"
            },
            "KeyName":{ 
               "Ref":"KeyName"
            },
            "Tags":[ 
               { 
                  "Key":"Application",
                  "Value":{ 
                     "Ref":"AWS::StackId"
                  }
               }
            ]
         }
      },
      "SubetThreeVmOne":{ 
         "Type":"AWS::EC2::Instance",
         "Properties":{ 
            "ImageId" : { "Fn::FindInMap" : [ "RegionMap", { "Ref" : "AWS::Region" }, "AMI"]},
            "SubnetId":{ 
               "Ref":"SubnetThree"
            },
            "InstanceType":{ 
               "Ref":"InstanceType"
            },
            "KeyName":{ 
               "Ref":"KeyName"
            },
            "Tags":[ 
               { 
                  "Key":"Application",
                  "Value":{ 
                     "Ref":"AWS::StackId"
                  }
               }
            ]
         }
      },
      "SubetThreeVmTwo":{ 
         "Type":"AWS::EC2::Instance",
         "Properties":{ 
            "ImageId" : { "Fn::FindInMap" : [ "RegionMap", { "Ref" : "AWS::Region" }, "AMI"]},
            "SubnetId":{ 
               "Ref":"SubnetThree"
            },
            "InstanceType":{ 
               "Ref":"InstanceType"
            },
            "KeyName":{ 
               "Ref":"KeyName"
            },
            "Tags":[ 
               { 
                  "Key":"Application",
                  "Value":{ 
                     "Ref":"AWS::StackId"
                  }
               }
            ]
         }
      }
   },
   "Outputs":{ 
      "InstanceID1":{ 
         "Description":"VM11 ID",
         "Value":{ 
            "Ref":"SubetOneVmOne"
         }
      },
      "InstanceID2":{ 
         "Description":"VM12 ID",
         "Value":{ 
            "Ref":"SubetOneVmTwo"
         }
      },
      "InstanceID3":{ 
         "Description":"VM21 ID",
         "Value":{ 
            "Ref":"SubetTwoVmOne"
         }
      },
      "InstanceID4":{ 
         "Description":"VM22 ID",
         "Value":{ 
            "Ref":"SubetTwoVmTwo"
         }
      },
      "InstanceID5":{ 
         "Description":"VM31 ID",
         "Value":{ 
            "Ref":"SubetThreeVmOne"
         }
      },
      "InstanceID6":{ 
         "Description":"VM32 ID",
         "Value":{ 
            "Ref":"SubetThreeVmTwo"
         }
      }
   }
}