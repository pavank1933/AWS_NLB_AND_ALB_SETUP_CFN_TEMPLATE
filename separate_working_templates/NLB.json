{ 
   "AWSTemplateFormatVersion":"2010-09-09",
   "Description":"AWS CloudFormation Template",
   "Parameters":{ 
      "SubnetOne":{ 
         "Description":"Subnet One",
         "Type":"String",
         "Default":"subnet-c64b50b1"
      },
      "SubnetThree":{ 
         "Description":"Subnet Three",
         "Type":"String",
         "Default":"subnet-cfcff896"
      },
      "SubetOneVmOne":{ 
         "Description":"SubetOneVmOne",
         "Type":"String",
         "Default":"i-09d88d6821cbca17f"
      },
      "SubetTwoVmOne":{ 
         "Description":"SubetTwoVmOne",
         "Type":"String",
         "Default":"i-0ebfeec228eeedc6e"
      },
      "SubetThreeVmOne":{ 
         "Description":"SubetThreeVmOne",
         "Type":"String",
         "Default":"i-0a43b3ca6cd23ea35"
      },
      "SubetOneVmTwo":{ 
         "Description":"SubetOneVmTwo",
         "Type":"String",
         "Default":"i-04cd722d65196154c"
      },
      "SubetTwoVmTwo":{ 
         "Description":"SubetTwoVmTwo",
         "Type":"String",
         "Default":"i-0c0a2cca3c90082ae"
      },
      "SubetThreeVmTwo":{ 
         "Description":"SubetThreeVmTwo",
         "Type":"String",
         "Default":"i-0e1c6dfe5910362b2"
      },
      "VPC":{
      	 "Description":"VPC",
         "Type":"String",
         "Default":"vpc-1ee31f7a"
      }
   },
   "Resources":{ 
      "NetworkLoadBalancer":{ 
         "Type":"AWS::ElasticLoadBalancingV2::LoadBalancer",
         "Properties":{ 
            "Name":"SamNetworkloadbalancer",
            "Scheme":"internet-facing",
            "Subnets":[ 
               { 
                  "Ref":"SubnetOne"
               },
               { 
                  "Ref":"SubnetThree"
               }
            ],
            "Type":"network",
            "Tags":[ 
               { 
                  "Key":"Name",
                  "Value":"network-elb"
               }
            ]
         }
      },
      "TargetGroupOne":{ 
         "Type":"AWS::ElasticLoadBalancingV2::TargetGroup",
         "Properties":{ 
            "Name":"MyTargetsOne",
            "Port":80,
            "Protocol":"TCP",
            "TargetGroupAttributes":[ 
               { 
                  "Key":"deregistration_delay.timeout_seconds",
                  "Value":"20"
               }
            ],
            "Targets":[ 
               { 
                  "Id":{ 
                     "Ref":"SubetOneVmOne"
                  },
                  "Port":80
               },
               { 
                  "Id":{ 
                     "Ref":"SubetTwoVmOne"
                  },
                  "Port":80
               },
               { 
                  "Id":{ 
                     "Ref":"SubetThreeVmOne"
                  },
                  "Port":80
               }
            ],
            "VpcId":{ 
               "Ref":"VPC"
            }
         }
      },
      "TargetGroupTwo":{ 
         "Type":"AWS::ElasticLoadBalancingV2::TargetGroup",
         "Properties":{ 
            "Name":"MyTargetsTwo",
            "Port":2100,
            "Protocol":"TCP",
            "TargetGroupAttributes":[ 
               { 
                  "Key":"deregistration_delay.timeout_seconds",
                  "Value":"20"
               }
            ],
            "Targets":[ 
               { 
                  "Id":{ 
                     "Ref":"SubetOneVmTwo"
                  },
                  "Port":2100
               },
               { 
                  "Id":{ 
                     "Ref":"SubetTwoVmTwo"
                  },
                  "Port":2100
               },
               { 
                  "Id":{ 
                     "Ref":"SubetThreeVmTwo"
                  },
                  "Port":2100
               }
            ],
            "VpcId":{ 
               "Ref":"VPC"
            }
         }
      },
      "ListenerOne":{ 
         "Type":"AWS::ElasticLoadBalancingV2::Listener",
         "Properties":{ 
            "DefaultActions":[ 
               { 
                  "Type":"forward",
                  "TargetGroupArn":{ 
                     "Ref":"TargetGroupOne"
                  }
               }
            ],
            "LoadBalancerArn":{ 
               "Ref":"NetworkLoadBalancer"
            },
            "Port":"80",
            "Protocol":"TCP"
         }
      },
      "ListenerTwo":{ 
         "Type":"AWS::ElasticLoadBalancingV2::Listener",
         "Properties":{ 
            "DefaultActions":[ 
               { 
                  "Type":"forward",
                  "TargetGroupArn":{ 
                     "Ref":"TargetGroupTwo"
                  }
               }
            ],
            "LoadBalancerArn":{ 
               "Ref":"NetworkLoadBalancer"
            },
            "Port":"2100",
            "Protocol":"TCP"
         }
      }
   },
   "Outputs":{ 
      "NetworkLoadBalancerName":{ 
         "Description":"NetworkLoadBalancer",
         "Value":{ 
            "Ref":"NetworkLoadBalancer"
         }
      },
      "TargetGroupOneName":{ 
         "Description":"TargetGroupOne",
         "Value":{ 
            "Ref":"TargetGroupOne"
         }
      },
      "TargetGroupTwoName":{ 
         "Description":"TargetGroupTwo",
         "Value":{ 
            "Ref":"TargetGroupTwo"
         }
      },
      "ListenerOneName":{ 
         "Description":"ListenerOne",
         "Value":{ 
            "Ref":"ListenerOne"
         }
      },
      "ListenerTwoName":{ 
         "Description":"ListenerTwo",
         "Value":{ 
            "Ref":"ListenerTwo"
         }
      }
   }
}